<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Games</title>
    <style>
        /* Your CSS styles here */
    </style>
</head>
<body>
    <h1>Mini Games</h1>
    <label for="timeInput">Set the time (in minutes):</label>
    <input type="number" id="timeInput" min="1" step="1" value="5"> 
    <button id="startButton">Start Timer</button>
    <p>Your break has lasted for:</p>
    <p id="display">00:00:00</p>
    <div id="buttonContainer" style="display: none;">
        <a href="Worktime.html">
            <button>Your break is over! Click here to return to the work page.</button>
        </a>
    </div>

    <div id="gamesContainer" style="display: none;">
        <h2>Choose a Mini Game:</h2>
        <button id="startTicTacToe">Tic Tac Toe</button>
        <button id="startGuessingGame">Guessing Game</button>
        <button id="startCookieClicker">Cookie Clicker</button>
    </div>

    <div id="ticTacToeContainer" style="display: none;">
        <table id="ticTacToeBoard">
            <!-- Tic Tac Toe board will be generated here -->
        </table>
        <p id="ticTacToeResult"></p>
    </div>

    <div id="guessingGameContainer" style="display: none;">
        <!-- Guessing Game content will be generated here -->
    </div>

    <div id="cookieClickerContainer" style="display: none;">
        <!-- Cookie Clicker content will be generated here -->
    </div>

    <script>
        let interval = null;
        let time = 0;
        let display, buttonContainer, gamesContainer, ticTacToeContainer, guessingGameContainer, cookieClickerContainer;

        document.addEventListener('DOMContentLoaded', function () {
            display = document.getElementById("display");
            buttonContainer = document.getElementById("buttonContainer");
            gamesContainer = document.getElementById("gamesContainer");
            ticTacToeContainer = document.getElementById("ticTacToeContainer");
            guessingGameContainer = document.getElementById("guessingGameContainer");
            cookieClickerContainer = document.getElementById("cookieClickerContainer");

            document.getElementById('startButton').addEventListener('click', startTimer);
            document.getElementById('startTicTacToe').addEventListener('click', startTicTacToe);
        });

        function startTimer() {
            const userInput = document.getElementById("timeInput").value;
            time = userInput * 60;
            if (interval) {
                clearInterval(interval);
            }
            interval = setInterval(() => {
                time -= 1;
                if (time <= 0) {
                    clearInterval(interval);
                    if (buttonContainer) buttonContainer.style.display = "block";
                    if (gamesContainer) gamesContainer.style.display = "none";
                } else {
                    if (gamesContainer) gamesContainer.style.display = "block";
                }
                if (display) {
                    display.innerHTML =
                        Math.floor(time / 3600).toString().padStart(2, "0") + ":" +
                        Math.floor((time % 3600) / 60).toString().padStart(2, "0") + ":" +
                        Math.floor((time % 60)).toString().padStart(2, "0");
                }
            }, 1000);
        }

        function startTicTacToe() {
            ticTacToeContainer.style.display = "block";
            guessingGameContainer.style.display = "none";
            cookieClickerContainer.style.display = "none";
            const board = document.getElementById("ticTacToeBoard");
            const cells = [];
            let currentPlayer = "X";
            let moves = 0;

            for (let i = 0; i < 3; i++) {
                const row = document.createElement("tr");
                cells[i] = [];
                for (let j = 0; j < 3; j++) {
                    const cell = document.createElement("td");
                    cell.textContent = "";
                    cell.onclick = () => {
                        if (!cell.textContent) {
                            cell.textContent = currentPlayer;
                            moves++;
                            if (checkWinner(cells, currentPlayer)) {
                                document.getElementById("ticTacToeResult").textContent = `${currentPlayer} wins!`;
                                resetTicTacToe(cells);
                            } else if (moves === 9) {
                                document.getElementById("ticTacToeResult").textContent = "It's a draw!";
                                resetTicTacToe(cells);
                            } else {
                                currentPlayer = currentPlayer === "X" ? "O" : "X";
                            }
                        }
                    };
                    cells[i][j] = cell;
                    row.appendChild(cell);
                }
                board.appendChild(row);
            }
        }

        function checkWinner(cells, player) {
            for (let i = 0; i < 3; i++) {
                if (cells[i][0].textContent === player &&
                    cells[i][1].textContent === player &&
                    cells[i][2].textContent === player) {
                    return true; 
                }
                if (cells[0][i].textContent === player &&
                    cells[1][i].textContent === player &&
                    cells[2][i].textContent === player) {
                    return true; 
                }
            }
            if (cells[0][0].textContent === player &&
                cells[1][1].textContent === player &&
                cells[2][2].textContent === player) {
                return true; 
            }
            if (cells[0][2].textContent === player &&
                cells[1][1].textContent === player &&
                cells[2][0].textContent === player) {
                return true; 
            }
            return false;
        }

        function resetTicTacToe(cells) {
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    cells[i][j].textContent = "";
                }
            }
            document.getElementById("ticTacToeResult").textContent = "";
        }
    </script>
</body>
</html>
